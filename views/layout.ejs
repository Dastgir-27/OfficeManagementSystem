<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof title !== 'undefined' ? title + ' - ' : '' %>Office Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold">Office Management</h1>
                    <div class="hidden md:flex space-x-4">
                        <a href="/" class="hover:text-blue-200">Dashboard</a>
                        <a href="/employees" class="hover:text-blue-200">Employees</a>
                        <a href="/departments" class="hover:text-blue-200">Departments</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="/" class="block py-2 hover:text-blue-200">Dashboard</a>
                <a href="/employees" class="block py-2 hover:text-blue-200">Employees</a>
                <a href="/departments" class="block py-2 hover:text-blue-200">Departments</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <%- body %>
    </main>

    <script>
        // Mobile menu toggle
        $('#mobile-menu-btn').click(function() {
            $('#mobile-menu').toggleClass('hidden');
        });

        // Location API functions
        window.loadCountries = function(countrySelect) {
            $.get('/api/countries')
                .done(function(countries) {
                    countrySelect.empty().append('<option value="">Select Country</option>');
                    countries.forEach(function(country) {
                        countrySelect.append(`<option value="${country.name}">${country.name}</option>`);
                    });
                })
                .fail(function() {
                    console.error('Failed to load countries');
                });
        };

        window.loadStates = function(country, stateSelect, citySelect) {
            if (!country) {
                stateSelect.empty().append('<option value="">Select State</option>');
                citySelect.empty().append('<option value="">Select City</option>');
                return;
            }

            $.get(`/api/states/${encodeURIComponent(country)}`)
                .done(function(states) {
                    stateSelect.empty().append('<option value="">Select State</option>');
                    citySelect.empty().append('<option value="">Select City</option>');
                    states.forEach(function(state) {
                        stateSelect.append(`<option value="${state.name}">${state.name}</option>`);
                    });
                })
                .fail(function() {
                    console.error('Failed to load states');
                });
        };

        window.loadCities = function(country, state, citySelect) {
            if (!country || !state) {
                citySelect.empty().append('<option value="">Select City</option>');
                return;
            }

            $.get(`/api/cities/${encodeURIComponent(country)}/${encodeURIComponent(state)}`)
                .done(function(cities) {
                    citySelect.empty().append('<option value="">Select City</option>');
                    cities.forEach(function(city) {
                        citySelect.append(`<option value="${city}">${city}</option>`);
                    });
                })
                .fail(function() {
                    console.error('Failed to load cities');
                });
        };
    </script>
</body>
</html>